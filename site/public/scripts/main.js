// Generated by CoffeeScript 1.8.0
(function() {
  var goDirection;

  goDirection = function(direction, element, highlight) {
    var robot_id;
    if (element == null) {
      element = null;
    }
    if (highlight == null) {
      highlight = true;
    }
    robot_id = $('#controls').data('robot-id');
    if (highlight) {
      $(element).addClass('highlight');
    } else {
      $(element).removeClass('highlight');
    }
    return $.ajax({
      method: "get",
      url: "/" + robot_id + "/" + direction
    });
  };

  $(function() {
    return $('#forward').on('vmousedown', function() {
      return goDirection("forward", this);
    });
  });

  $(function() {
    return $('#forward').on('vmouseup', function() {
      return goDirection("stop", this, false);
    });
  });

  $(function() {
    return $('#back').on('vmousedown', function() {
      return goDirection("back", this);
    });
  });

  $(function() {
    return $('#back').on('vmouseup', function() {
      return goDirection("stop", this, false);
    });
  });

  $(function() {
    return $('#left').on('vmousedown', function() {
      return goDirection("left", this);
    });
  });

  $(function() {
    return $('#left').on('vmouseup', function() {
      return goDirection("stop", this, false);
    });
  });

  $(function() {
    return $('#right').on('vmousedown', function() {
      return goDirection("right", this);
    });
  });

  $(function() {
    return $('#right').on('vmouseup', function() {
      return goDirection("stop", this, false);
    });
  });

  $(function() {
    return $('#stop').on('vmousedown', function() {
      return goDirection("stop", this);
    });
  });

  $(function() {
    return $('#stop').on('vmouseup', function() {
      return goDirection("stop", this, false);
    });
  });

  $(function() {
    return $('body').on('keydown', function(e) {
      var key;
      key = e.which;
      if (window.previousKey !== key) {
        if (key === 38) {
          goDirection('forward', $('#forward'));
        } else if (key === 40) {
          goDirection('back', $('#back'));
        } else if (key === 37) {
          goDirection('left', $('#left'));
        } else if (key === 39) {
          goDirection('right', $('#right'));
        } else if (key === 83) {
          goDirection('stop', $('#stop'));
        }
        return window.previousKey = key;
      }
    });
  });

  $(function() {
    return $('body').on('keyup', function(e) {
      var el, key;
      key = e.which;
      el = null;
      if (key === 38) {
        el = $('#forward');
      } else if (key === 40) {
        el = $('#back');
      } else if (key === 37) {
        el = $('#left');
      } else if (key === 39) {
        el = $('#right');
      } else if (key === 83) {
        el = $('#stop');
      }
      if (key === 37 || key === 38 || key === 39 || key === 40 || key === 83) {
        goDirection('stop', el, false);
      }
      return window.previousKey = 0;
    });
  });

  window.previousKey = 0;

}).call(this);
